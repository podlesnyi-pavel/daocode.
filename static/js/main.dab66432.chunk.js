(this["webpackJsonpreact-default"]=this["webpackJsonpreact-default"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},106:function(e,t,n){"use strict";n.r(t);var c=n(19),r=n.n(c),a=n(3),i=n(4),s=n(0),o=n.n(s),u=(n(99),n(100),n(101),o.a.createContext({chooseItem:function(e){},deleteItem:function(e){},editItem:function(e){}})),d=n(6),l=function(e){var t=e.todos,n=Object(s.useContext)(u).chooseItem;return Object(d.jsx)("ul",{className:"list",children:t.map((function(e){return Object(d.jsxs)("li",{className:"list__item",onClick:function(){var c=t.find((function(t){return t.id===e.id}));void 0!==c&&n(c)},children:[Object(d.jsx)("h3",{children:e.id}),Object(d.jsx)("div",{children:e.title})]},e.id)}))})},j=function(e){var t=e.todos;return Object(d.jsx)("div",{className:"sidebar",children:Object(d.jsx)(l,{todos:t})})},b=n(1),f=n(108),O=n(49),v=n(52),h=f.a.confirm,x=function(e){var t=e.currentItem,n=Object(s.useState)(!1),c=Object(i.a)(n,2),r=c[0],a=c[1],o=Object(s.useState)(t.userId),l=Object(i.a)(o,2),j=l[0],x=l[1],m=Object(s.useState)(t.title),p=Object(i.a)(m,2),k=p[0],I=p[1],g=Object(s.useContext)(u),S=g.deleteItem,y=g.editItem;return Object(d.jsx)("div",{className:"workspace",children:t&&Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:t.userId}),Object(d.jsx)("div",{children:t.title}),Object(d.jsxs)("div",{className:"workspace__buttons",children:[Object(d.jsx)(O.a,{type:"primary",onClick:function(){a(!0)},children:"Edit"}),Object(d.jsxs)(f.a,{title:"Edit",visible:r,onOk:function(){a(!1),y(Object(b.a)(Object(b.a)({},t),{},{userId:j,title:k}))},onCancel:function(){a(!1)},children:[Object(d.jsx)("input",{type:"number",value:j,placeholder:"id",onChange:function(e){x(Number(e.target.value))}}),Object(d.jsx)("input",{type:"text",value:k,placeholder:"title",onChange:function(e){I(e.target.value)}})]}),Object(d.jsx)(O.a,{onClick:function(){h({title:"Are you sure delete this task?",icon:Object(d.jsx)(v.a,{}),okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){S(t.id)}})},type:"dashed",children:"Delete"})]})]})})},m=function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(s.useState)(null),o=Object(i.a)(r,2),l=o[0],b=o[1],v=Object(s.useState)(!0),h=Object(i.a)(v,2),m=h[0],p=h[1],k=Object(s.useState)(!1),I=Object(i.a)(k,2),g=I[0],S=I[1],y=Object(s.useState)(1),C=Object(i.a)(y,2),N=C[0],w=C[1],E=Object(s.useState)(""),_=Object(i.a)(E,2),B=_[0],D=_[1],A=Object(s.useRef)();Object(s.useEffect)((function(){var e=indexedDB.open("tasks",1);e.onupgradeneeded=function(){A.current=e.result,A.current.objectStoreNames.contains("tasks")||A.current.createObjectStore("tasks",{keyPath:"task",autoIncrement:!0})},e.onerror=function(){alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a IndexedDB")},e.onsuccess=function(e){A.current=e.target.result,e.target.result.transaction("tasks","readonly").objectStore("tasks").getAll().onsuccess=function(e){c(e.target.result)}}}),[]);var T=function(){S(!0)},P=function(){if(""!==B){var e,t=(null===(e=A.current)||void 0===e?void 0:e.transaction("tasks","readwrite")).objectStore("tasks"),r={userId:N,id:n.length+1,title:B,completed:!1},i=t.add(r);c([].concat(Object(a.a)(n),[r])),i.onsuccess=function(){w(1),D("")},i.onerror=function(){alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043c\u0435\u0442\u043a\u0443")}}else T()};return Object(d.jsx)(u.Provider,{value:{chooseItem:function(e){b(e),p(!0)},deleteItem:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;c(n.filter((function(e){return e.id!==t}))),p(!1);var r=null===(e=A.current)||void 0===e?void 0:e.transaction("tasks","readwrite"),a=null===r||void 0===r?void 0:r.objectStore("tasks");null===a||void 0===a||a.delete(t),console.log("delete")},editItem:function(e){var t=n.findIndex((function(t){return t.id===e.id}));c(n.map((function(n,c){return t===c?e:n}))),b(e);var r=indexedDB.open("tasks",1);r.onupgradeneeded=function(){A.current=r.result,A.current.objectStoreNames.contains("tasks")||A.current.createObjectStore("tasks",{keyPath:"task",autoIncrement:!0})},r.onerror=function(){alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a IndexedDB")},r.onsuccess=function(t){A.current=t.target.result;var r=t.target.result.transaction("tasks","readwrite").objectStore("tasks");r.clear();var a=n.findIndex((function(t){return t.id===e.id})),i=n.map((function(t,n){return n===a?e:t}));i.forEach((function(e){return r.add(e)})),c(i)}}},children:Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(j,{todos:n}),Object(d.jsxs)("div",{className:"App__work",children:[Object(d.jsx)(f.a,{title:"\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u043c\u0435\u0442\u043a\u0430",visible:g,onOk:function(){S(!1),P()},onCancel:function(){S(!1)},children:Object(d.jsxs)("form",{action:"#",method:"GET",children:[Object(d.jsx)("input",{type:"number",value:N,placeholder:"userId",onChange:function(e){w(+e.target.value)},required:!0}),Object(d.jsx)("input",{type:"text",value:B,placeholder:"\u0417\u0430\u043c\u0435\u0442\u043a\u0430",onChange:function(e){D(e.target.value)},required:!0})]})}),Object(d.jsx)(O.a,{type:"primary",onClick:T,children:"\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u043c\u0435\u0442\u043a\u0430"}),l&&m&&Object(d.jsx)(x,{currentItem:l})]})]})})};n(105);r.a.render(Object(d.jsx)(m,{}),document.getElementById("root"))},99:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.dab66432.chunk.js.map