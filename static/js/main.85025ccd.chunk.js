(this["webpackJsonpreact-default"]=this["webpackJsonpreact-default"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},106:function(e,t,n){"use strict";n.r(t);var c=n(19),i=n.n(c),r=n(3),s=n(4),o=n(0),a=n.n(o),u=(n(99),n(100),n(101),a.a.createContext({chooseItem:function(e){},deleteItem:function(e){},editItem:function(e){}})),l=n(6),d=function(e){var t=e.todos,n=Object(o.useContext)(u).chooseItem;return Object(l.jsx)("ul",{className:"list",children:t.map((function(e){return Object(l.jsxs)("li",{className:"list__item",onClick:function(){var c=t.find((function(t){return t.id===e.id}));void 0!==c&&n(c)},children:[Object(l.jsx)("h3",{children:e.id}),Object(l.jsx)("div",{children:e.title})]},e.id)}))})},j=function(e){var t=e.todos;return Object(l.jsx)("div",{className:"sidebar",children:Object(l.jsx)(d,{todos:t})})},b=n(1),O=n(108),f=n(49),v=n(52),h=O.a.confirm,x=function(e){var t=e.currentItem,n=Object(o.useState)(!1),c=Object(s.a)(n,2),i=c[0],r=c[1],a=Object(o.useState)(t.userId),d=Object(s.a)(a,2),j=d[0],x=d[1],m=Object(o.useState)(t.title),p=Object(s.a)(m,2),k=p[0],I=p[1],g=Object(o.useContext)(u),y=g.deleteItem,S=g.editItem;return Object(l.jsx)("div",{className:"workspace",children:t&&Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{children:t.userId}),Object(l.jsx)("div",{children:t.title}),Object(l.jsxs)("div",{className:"workspace__buttons",children:[Object(l.jsx)(f.a,{type:"primary",onClick:function(){r(!0)},children:"Edit"}),Object(l.jsxs)(O.a,{title:"Edit",visible:i,onOk:function(){r(!1),S(Object(b.a)(Object(b.a)({},t),{},{userId:j,title:k}))},onCancel:function(){r(!1)},children:[Object(l.jsx)("input",{type:"number",value:j,placeholder:"id",onChange:function(e){x(Number(e.target.value))}}),Object(l.jsx)("input",{type:"text",value:k,placeholder:"title",onChange:function(e){I(e.target.value)}})]}),Object(l.jsx)(f.a,{onClick:function(){h({title:"Are you sure delete this task?",icon:Object(l.jsx)(v.a,{}),okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){y(t.id)}})},type:"dashed",children:"Delete"})]})]})})},m=function(){var e=Object(o.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(o.useState)(null),a=Object(s.a)(i,2),d=a[0],b=a[1],v=Object(o.useState)(!0),h=Object(s.a)(v,2),m=h[0],p=h[1],k=Object(o.useState)(!1),I=Object(s.a)(k,2),g=I[0],y=I[1],S=Object(o.useState)(1),C=Object(s.a)(S,2),N=C[0],w=C[1],_=Object(o.useState)(""),E=Object(s.a)(_,2),A=E[0],T=E[1],B=Object(o.useRef)();Object(o.useEffect)((function(){var e=indexedDB.open("tasks",1);e.onupgradeneeded=function(){B.current=e.result,B.current.objectStoreNames.contains("tasks")||B.current.createObjectStore("tasks",{keyPath:"task",autoIncrement:!0})},e.onerror=function(){alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a IndexedDB")},e.onsuccess=function(e){B.current=e.target.result,e.target.result.transaction("tasks","readonly").objectStore("tasks").getAll().onsuccess=function(e){c(e.target.result)}}}),[]);var D=function(){y(!0)},q=function(){if(""!==A){var e,t=(null===(e=B.current)||void 0===e?void 0:e.transaction("tasks","readwrite")).objectStore("tasks"),i={userId:N,id:n.length+1,title:A,completed:!1},s=t.add(i);c([].concat(Object(r.a)(n),[i])),s.onsuccess=function(){w(1),T("")},s.onerror=function(){alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043c\u0435\u0442\u043a\u0443")}}else D()};return Object(l.jsx)(u.Provider,{value:{chooseItem:function(e){b(e),p(!0)},deleteItem:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;c(n.filter((function(e){return e.id!==t}))),p(!1);var i=null===(e=B.current)||void 0===e?void 0:e.transaction("tasks","readwrite"),r=null===i||void 0===i?void 0:i.objectStore("tasks");null===r||void 0===r||r.delete(t),console.log("delete")},editItem:function(e){var t=n.findIndex((function(t){return t.id===e.id}));c(n.map((function(n,c){return t===c?e:n}))),b(e)}},children:Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(j,{todos:n}),Object(l.jsxs)("div",{className:"App__work",children:[Object(l.jsx)(O.a,{title:"\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u043c\u0435\u0442\u043a\u0430",visible:g,onOk:function(){y(!1),q()},onCancel:function(){y(!1)},children:Object(l.jsxs)("form",{action:"#",method:"GET",children:[Object(l.jsx)("input",{type:"number",value:N,placeholder:"userId",onChange:function(e){w(+e.target.value)},required:!0}),Object(l.jsx)("input",{type:"text",value:A,placeholder:"\u0417\u0430\u043c\u0435\u0442\u043a\u0430",onChange:function(e){T(e.target.value)},required:!0})]})}),Object(l.jsx)(f.a,{type:"primary",onClick:D,children:"\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u043c\u0435\u0442\u043a\u0430"}),d&&m&&Object(l.jsx)(x,{currentItem:d})]})]})})};n(105);i.a.render(Object(l.jsx)(m,{}),document.getElementById("root"))},99:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.85025ccd.chunk.js.map